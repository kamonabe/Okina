# Okina 開発ワークフロー

## 基本原則

### 最優先原則：「理解に追いつける範囲で進める」

```
人間の理解速度 > AI の生成速度
```

この原則により：
- ✅ コードの品質が保たれる
- ✅ 属人化を防げる
- ✅ 長期的なメンテナンス性が保たれる
- ✅ バグの早期発見が可能
- ✅ セキュリティリスクを低減

## 開発段階別アプローチ

### 自動で進めて良いもの（小さい粒度）

**条件**:
- 変更が10行以内
- 影響範囲が1ファイル以内
- テストで検証可能
- ロールバックが容易

**例**:
- ✅ タイポ修正
- ✅ インポート追加
- ✅ 型ヒント追加
- ✅ ドキュメント更新
- ✅ テストケース追加

### 人間の確認が必要なもの（中程度の粒度）

**条件**:
- 変更が10〜50行
- 影響範囲が2〜3ファイル
- 既存機能への影響が小さい

**例**:
- ⚠️ 新規関数の追加
- ⚠️ 既存関数の変更
- ⚠️ 設定ファイルの変更
- ⚠️ 依存パッケージの追加

### 必ず理解してから進めるもの（大きい粒度）

**条件**:
- 変更が50行以上
- 影響範囲が4ファイル以上
- アーキテクチャに影響

**例**:
- 🛑 新機能の実装
- 🛑 アーキテクチャ変更
- 🛑 外部API連携
- 🛑 セキュリティ関連

## テスト戦略

### テストレベル
1. **ユニットテスト**: 外部依存なし
2. **統合テスト**: 外部依存あり
3. **プロパティテスト**: hypothesis使用

### カバレッジ目標
- **目標**: 90%以上
- **最低**: 80%以上
- **重要モジュール**: 95%以上

### テスト実行
```bash
pytest tests/ -v
pytest --cov=src/okina --cov-report=html
```

## コード品質

### フォーマット
```bash
black src/ tests/
flake8 src/ tests/
mypy src/
```

### コミット前チェック
1. テスト実行
2. カバレッジ確認
3. フォーマット適用
4. 型チェック

## リリースプロセス

### バージョニング
- セマンティックバージョニング（SemVer）
- `version.txt`で管理

### リリース手順
1. CHANGELOG.md更新
2. version.txt更新
3. テスト実行
4. タグ作成
5. PyPI公開

## ドキュメント管理

### 必須ドキュメント
- README.md: プロジェクト概要
- CHANGELOG.md: 変更履歴
- docs/: 詳細ドキュメント

### 更新タイミング
- 機能追加時
- API変更時
- 設定変更時