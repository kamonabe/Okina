# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¨™æº–ã‚¬ã‚¤ãƒ‰

## ðŸŽ¯ ç›®çš„
å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€šã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸºæº–ã‚’å®šç¾©ã—ã€
æ©Ÿå¯†æƒ…å ±æ¼æ´©ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚’é˜²æ­¢ã™ã‚‹ã€‚

## ðŸš¨ æ©Ÿå¯†æƒ…å ±æ¤œçŸ¥ï¼ˆæœ€é‡è¦ï¼‰

### å³åº§ã«å‡¦ç†ä¸­æ–­ã™ã‚‹å¯¾è±¡
ä»¥ä¸‹ã‚’æ¤œçŸ¥ã—ãŸã‚‰**å³åº§ã«å‡¦ç†ã‚’ä¸­æ–­**ã—è­¦å‘Šï¼š

#### APIã‚­ãƒ¼ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³
- **OpenAI**: `sk-[A-Za-z0-9]{48}`
- **AWS**: `AKIA[0-9A-Z]{16}`
- **GitHub**: `ghp_[A-Za-z0-9]{36}`
- **Slack Bot**: `xoxb-[0-9]+-[0-9]+-[A-Za-z0-9]+`

#### Webhook URL
- **Slack**: `https://hooks\.slack\.com/services/`
- **Discord**: `https://discord\.com/api/webhooks/`
- **Teams**: `https://[^.]+\.webhook\.office\.com/`

#### ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ»èªè¨¼æƒ…å ±
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: `password\s*[:=]\s*["'][^"']+["']`
- **ç§˜å¯†éµ**: `BEGIN (PRIVATE|RSA PRIVATE) KEY`
- **JWT**: `eyJ[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*`

### å¯¾å¿œæ–¹æ³•
```
ðŸš¨ æ©Ÿå¯†æƒ…å ±ã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ

ã€æŽ¨å¥¨å¯¾å¿œã€‘
1. ç’°å¢ƒå¤‰æ•°ã«ç§»è¡Œ: webhook_url: "env:SLACK_WEBHOOK"
2. æ—¢å­˜ã®æƒ…å ±ã‚’ç„¡åŠ¹åŒ–

å‡¦ç†ã‚’ä¸­æ–­ã—ã¾ã™ã€‚å®‰å…¨åŒ–ã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚
```

## ðŸ” ç’°å¢ƒå¤‰æ•°ç®¡ç†

### å‘½åè¦ç´„
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰
KOMON_SLACK_WEBHOOK="https://hooks.slack.com/..."
OKINA_DISCORD_WEBHOOK="https://discord.com/..."

# å…±é€šã‚µãƒ¼ãƒ“ã‚¹
GITHUB_TOKEN="ghp_..."
AWS_ACCESS_KEY_ID="AKIA..."
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã®å‚ç…§
```yaml
# settings.yml
notifications:
  slack:
    webhook_url: "env:KOMON_SLACK_WEBHOOK"
    channel: "#alerts"
```

## ðŸ›¡ï¸ ã‚³ãƒ¼ãƒ‰å†…ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### å…¥åŠ›æ¤œè¨¼
```python
# å¿…é ˆï¼šå¤–éƒ¨å…¥åŠ›ã®æ¤œè¨¼
def validate_input(data: str) -> str:
    if not data or len(data) > 1000:
        raise ValueError("Invalid input length")
    
    # SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
    if any(char in data for char in ["'", '"', ";", "--"]):
        raise ValueError("Invalid characters detected")
    
    return data.strip()
```

### ãƒ­ã‚°å‡ºåŠ›ã®æ³¨æ„
```python
# âŒ å±é™ºï¼šæ©Ÿå¯†æƒ…å ±ã‚’ãƒ­ã‚°ã«å‡ºåŠ›
logger.info(f"API key: {api_key}")

# âœ… å®‰å…¨ï¼šãƒžã‚¹ã‚¯å‡¦ç†
logger.info(f"API key: {api_key[:8]}***")
```

## ðŸ” ä¾å­˜é–¢ä¿‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
```bash
# å®šæœŸå®Ÿè¡Œï¼ˆæœˆ1å›žï¼‰
pip-audit
safety check
bandit -r src/
```

### ä¾å­˜é–¢ä¿‚ã®æœ€å°åŒ–
```python
# requirements.txt
# å¿…è¦æœ€å°é™ã®ä¾å­˜é–¢ä¿‚ã®ã¿
requests>=2.28.0,<3.0.0
pyyaml>=6.0,<7.0
```

## ðŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¿è­·

### .gitignoreå¿…é ˆé …ç›®
```gitignore
# æ©Ÿå¯†æƒ…å ±
.env
.env.local
*.key
*.pem
config/secrets.yml

# ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«
*.tmp
*.log
.cache/
```

### ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™
```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
chmod 600 config/secrets.yml

# å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
chmod 755 scripts/*.py
```

## ðŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### HTTPSå¿…é ˆ
```python
# âŒ å±é™ºï¼šHTTPé€šä¿¡
requests.get("http://api.example.com")

# âœ… å®‰å…¨ï¼šHTTPSé€šä¿¡
requests.get("https://api.example.com", verify=True)
```

### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
```python
# å¿…é ˆï¼šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
requests.get(url, timeout=30)
```

## ðŸ§ª ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆé …ç›®
```python
def test_no_secrets_in_code():
    """ã‚³ãƒ¼ãƒ‰å†…ã«æ©Ÿå¯†æƒ…å ±ãŒãªã„ã“ã¨ã‚’ç¢ºèª"""
    for file_path in get_source_files():
        content = read_file(file_path)
        assert not re.search(r'sk-[A-Za-z0-9]{48}', content)
        assert not re.search(r'AKIA[0-9A-Z]{16}', content)

def test_input_validation():
    """å…¥åŠ›æ¤œè¨¼ãŒé©åˆ‡ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª"""
    with pytest.raises(ValueError):
        validate_input("'; DROP TABLE users; --")
```

## ðŸ“‹ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### é–‹ç™ºæ™‚
- [ ] æ©Ÿå¯†æƒ…å ±ã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†
- [ ] å…¥åŠ›æ¤œè¨¼ã‚’å®Ÿè£…
- [ ] ãƒ­ã‚°ã«æ©Ÿå¯†æƒ…å ±ã‚’å‡ºåŠ›ã—ãªã„
- [ ] HTTPSé€šä¿¡ã‚’ä½¿ç”¨
- [ ] ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¨­å®š

### ãƒªãƒªãƒ¼ã‚¹å‰
- [ ] pip-auditå®Ÿè¡Œ
- [ ] banditå®Ÿè¡Œ
- [ ] .gitignoreç¢ºèª
- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®šç¢ºèª
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
- [ ] ä¾å­˜é–¢ä¿‚ã®è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆæœˆ1å›žï¼‰
- [ ] ä¸è¦ãªæ¨©é™ã®å‰Šé™¤
- [ ] ãƒ­ã‚°ã®å®šæœŸå‰Šé™¤
- [ ] å¤ã„APIã‚­ãƒ¼ã®ç„¡åŠ¹åŒ–

## ðŸš¨ ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ

### æ©Ÿå¯†æƒ…å ±æ¼æ´©æ™‚
1. **å³åº§ã«ç„¡åŠ¹åŒ–**ï¼šAPIã‚­ãƒ¼ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç„¡åŠ¹åŒ–
2. **å½±éŸ¿ç¯„å›²èª¿æŸ»**ï¼šãƒ­ã‚°ãƒ»å±¥æ­´ã‚’ç¢ºèª
3. **æ–°ã—ã„èªè¨¼æƒ…å ±ç”Ÿæˆ**ï¼šå®‰å…¨ãªæ–¹æ³•ã§å†è¨­å®š
4. **å†ç™ºé˜²æ­¢ç­–**ï¼šãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„

### å ±å‘Šä½“åˆ¶
```
è»½å¾®ãªå•é¡Œï¼šé–‹ç™ºãƒãƒ¼ãƒ å†…ã§å¯¾å¿œ
é‡å¤§ãªå•é¡Œï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã«å³åº§ã«å ±å‘Š
```

## ðŸŽ¯ é©ç”¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- âœ… Komon
- âœ… Okina
- ðŸ”„ ä»Šå¾Œã®æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ã¦

---

**æœ€çµ‚æ›´æ–°**: 2025-01-06
**é‡è¦åº¦**: æœ€é«˜ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰